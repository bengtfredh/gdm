--- gdm-2.18.0/gui/gdmuser.c.hide-disabled-users	2007-05-15 11:44:45.000000000 -0400
+++ gdm-2.18.0/gui/gdmuser.c	2007-05-15 11:45:34.000000000 -0400
@@ -206,6 +206,12 @@
     gint found = 0;
     gchar *csh;
 
+    if (strcmp (usersh, "/sbin/nologin") == 0 ||
+	strcmp (usersh, "/bin/true") == 0 ||
+	strcmp (usersh, "/bin/false") == 0) {
+      return 0;
+    }
+
     setusershell ();
 
     while ((csh = getusershell ()) != NULL)
